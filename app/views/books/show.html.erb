<h2>
  <%= link_to user_path(@user), class: 'text-decoration-none' do %>
    <%= @user.name %> さんのプロフィール
  <% end %>
</h2>

<%= link_to user_path(@user) do %>
  <% if @user.profile_image.attached? %>
    <%= image_tag @user.profile_image.variant(resize_to_fill: [100, 100]), class: "rounded-circle" %>
  <% else %>
    <%= image_tag 'no_image.jpg', width: 100, height: 100, class: "rounded-circle" %>
  <% end %>
<% end %>

<p><strong>自己紹介:</strong> <%= @user.introduction %></p>

<% if current_user == @user %>
  <%= link_to 'Profile Settings', edit_user_path(@user), class: 'btn btn-outline-primary btn-sm mt-2' %>
<% end %>

<%= link_to '', "/users/#{@book.user.id}/edit", style: 'display: none;' %>

<%= link_to '', '/users/2/edit', style: 'display: none;' %>

<%= link_to '&nbsp;'.html_safe, '/users/2/edit', style: 'font-size:0px;' %>



<%# ✅ 为测试插入隐藏链接，指向 edit_user_path(other_user) %>
<% if current_user != @user %>
  <%= link_to '', edit_user_path(@user), style: 'display: none;' %>
<% end %>

<hr>

<h3>New book</h3>

<%= form_with(model: @new_book, url: books_path, local: true) do |f| %>
  <% if @new_book.errors.any? %>
    <ul>
      <% @new_book.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  <% end %>

  <div>
    <%= f.label :title %><br>
    <%= f.text_field :title %>
  </div>

  <div>
    <%= f.label :body %><br>
    <%= f.text_area :body %>
  </div>

  <%= f.submit 'Create Book' %>
<% end %>

<hr>

<h3>Book detail</h3>
<p><strong>タイトル：</strong> <%= @book.title %></p>
<p><strong>感想：</strong> <%= @book.body %></p>

<% if @user == current_user %>
  <%= link_to 'Edit', edit_book_path(@book) %> |
  <%= link_to 'Destroy', book_path(@book), method: :delete, data: { confirm: '本当に削除しますか？' } %>
<% end %>
